<div class="container mt-4">
  <table class="table table-striped">
    <thead>
    <tr>
      <th>ID</th>
      <th>Acronym</th>
      <th>Name</th>
      <th>Actions</th>
    </tr>
    </thead>
    <tbody>
    <tr *ngFor="let currency of currencies$ | async" [formGroup]="currencyEditForm">
      <td>
        {{ currency.id }}
      </td>
      <td>
        <span *ngIf="!(editing && currencyEditForm.get('id')?.value === currency.id)">
          {{ currency.acronym }}
        </span>
        <input *ngIf="editing && currencyEditForm.get('id')?.value === currency.id"
               type="text"
               class="form-control"
               formControlName="acronym">
      </td>
      <td>
        <span *ngIf="!(editing && currencyEditForm.get('id')?.value === currency.id)">
          {{ currency.name }}
        </span>
        <input *ngIf="editing && currencyEditForm.get('id')?.value === currency.id"
               type="text"
               class="form-control"
               formControlName="name">
      <td>
        <div class="d-flex gap-3" *ngIf="!(editing && currencyEditForm.get('id')?.value === currency.id)">
          <a type="button"
             (click)="editCurrency(currency)"
             title="Edit">
            <i class="bi bi-pencil"></i>
            Edit
          </a>
          <a type="button"
             (click)="deleteCurrency(currency.id)"
             title="Delete">
            <i class="bi bi-trash"></i>
            Delete
          </a>
        </div>
        <div class="d-flex gap-3" *ngIf="editing && currencyEditForm.get('id')?.value === currency.id">
          <a type="button"
             (click)="updateCurrency()"
             title="Save">
            <i class="bi bi-save"></i>
            Save
          </a>
          <a type="button"
             (click)="cancelEditCurrency()"
             title="Cancel">
            <i class="bi bi-x-circle"></i>
            Cancel
          </a>
        </div>
      </td>
    </tr>
    </tbody>
  </table>
  <h3 class="mt-5"><span class="text-gradient">Add currency</span></h3>
  <form [formGroup]="currencyForm" (ngSubmit)="createCurrency()">
    <div class="row">
      <div class="col-4">
        <label for="acronym" class="form-label">Acronym</label>
        <input type="text"
               class="form-control"
               id="acronym"
                placeholder="Acronym"
               formControlName="acronym">
      </div>
      <div class="col-6">
        <label for="name" class="form-label">Name</label>
        <input type="text"
               class="form-control"
               id="name"
               placeholder="Name"
               formControlName="name">
      </div>
      <div class="col-2 center-div">
        <button type="submit"
                [disabled]="!currencyForm.valid"
                class="w-100 btn btn-primary">
          Add
        </button>
      </div>
    </div>
  </form>
</div>
